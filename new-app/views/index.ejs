<!doctype html>
<html prefix="og: http://ogp.me/ns#">

<head>
    <title>Money Lover</title>
    <meta name="apple-itunes-app" content="app-id=486312413, affiliate-data=moneylover-web, app-argument=money">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <link rel="shortcut icon" href="/images/favicon.ico">
    <link href='https://fonts.googleapis.com/css?family=Roboto:500,400,300,700&subset=latin,vietnamese' rel='stylesheet' type='text/css'>
    <script src="/components/platform/platform.js" ></script>
    <link rel="import" href="/components/polymer/polymer.html" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Money Lover Web-based" />
    <meta property="og:url" content="https://web.moneylover.me" />
    <meta property="og:image" content="https://web.moneylover.me/images/thumbnail.png" />
    <meta property="og:description" content="Money Lover is a great yet simple manager for tracking your personal finance from your mobile device." />

    <link rel="import" href="/components/core-ajax/core-ajax.html">
    <link rel="import" href="/components/app-router/app-router.html">
    <link rel="import" href="/components/core-localstorage/core-localstorage.html">
    <link rel="import" href="/components/core-header-panel/core-header-panel.html" >
    <link rel="import" href="/components/core-toolbar/core-toolbar.html">
    <link rel="import" href="/components/core-item/core-item.html">
    <link rel="import" href="/components/core-menu-button/core-menu-button.html">
    <link rel="import" href="/components/core-icon/core-icon.html">
    <link rel="import" href="/components/core-icons/maps-icons.html">
    <link rel="import" href="/components/core-icons/social-icons.html">
    <link rel="import" href="/components/core-icon-button/core-icon-button.html">
    <link rel="import" href="/components/core-tooltip/core-tooltip.html">

    <link rel="import" href="/components/paper-input/paper-input.html">
    <link rel="import" href="/components/paper-button/paper-button.html">
    <link rel="import" href="/components/paper-fab/paper-fab.html">
    <link rel="import" href="/components/paper-button/paper-button.html">
    <link rel="import" href="/components/paper-ripple/paper-ripple.html">
    <link rel="import" href="/components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="/components/paper-dialog/paper-dialog.html">
    <link rel="import" href="/components/paper-toast/paper-toast.html">
    <link rel="import" href="/components/paper-shadow/paper-shadow.html">
    <link rel="import" href="/components/x-imager/x-imager.html">

    <link rel="import" href="/elements/wallet-list.html">
    <link rel="import" href="/elements/transaction-list.html">
    <link rel="import" href="/elements/user-info-dialog.html">
    <link rel="import" href="/elements/transaction-detail-dialog.html">
    <link rel="import" href="/elements/transaction-list-timerange.html">
    <link rel="import" href="/elements/category-picker-dialog.html">
    <link rel="import" href="/elements/date-picker-dialog.html">
    <link rel="import" href="/elements/event-list.html">
    <link rel="import" href="/elements/date-picker-dialog.html">
    <link rel="import" href="/elements/currency-picker-dialog.html">
    <link rel="import" href="/elements/icon-picker-dialog.html">
    <link rel="import" href="/elements/wallet-detail-dialog.html">
    <link rel="import" href="/elements/signup-success-dialog.html">

    <link rel="import" href="/elements/item-list/item-amount.html">
    <link rel="import" href="/elements/item-list/icon-group.html">
    <link rel="import" href="/elements/item-list/item-event.html">
    <link rel="import" href="/elements/item-list/item-transaction.html">
    <link rel="import" href="/elements/item-list/item-wallet.html">

    <link rel="import" href="/post-service/forgot-password-service.html">
    <link rel="import" href="/post-service/user-login-service.html">
    <link rel="import" href="/post-service/currency-service.html">
    <link rel="import" href="/post-service/reset-password-service.html">
    <link rel="import" href="/post-service/sign-up-service.html">
    <link rel="import" href="/post-service/category-list-service.html">
    <link rel="import" href="/post-service/event-service.html">
    <link rel="import" href="/post-service/icon-list-service.html">
    <link rel="import" href="/post-service/wallet-list-service.html">
    <link rel="import" href="/post-service/transaction-service.html">
    <link rel="import" href="/post-service/transaction-list-service.html">
    <link rel="import" href="/post-service/user-logout-service.html">
    <link rel="import" href="/post-service/wallet-service.html">
    <link rel="import" href="/post-service/device-service.html">

    <!-- <link rel="import" href="/test-vul.html"/> -->
    <link href="/stylesheets/main.css" rel="stylesheet" shim-shadowdom>
    <script src="/javascripts/momment.min.js"></script>
    <script src="/javascripts/accounting.min.js"></script>
    <script src="/javascripts/bugsense.min.js"></script>
    <script src="//socket.moneylover.me/socket.io/socket.io.js"></script>
</head>

<body fullbleed unresolved>
<app-router trailingSlash="ignore">
    <app-route path="/" import="/pages/user-login-page.html"></app-route>
    <app-route path="/reset-password" import="/pages/reset-password-page.html"></app-route>
    <app-route path="/forgot-password" import="/pages/forgot-password-page.html"></app-route>
    <app-route path="/login" import="/pages/user-login-page.html"></app-route>
    <app-route path="/register" import="/pages/user-register-page.html"></app-route>
    <app-route path="/wallet/" import="/pages/main-page.html"></app-route>
    <app-route path="/wallet/:walletId" import="/pages/main-page.html"></app-route>
    <app-route path="/404" import="/pages/not-found-page.html"></app-route>
    <app-route path="*" import="/pages/not-found-page.html"></app-route>
</app-router>


<script>
    var urlRoot = 'https://static.moneylover.me';
    var defaultWalletIcon = 'ic_category_foodndrink';
    var defaultCurrencyIcon = 'icon_not_selected';
    var defaultCategoryIcon = 'icon_not_selected';

    function cloneObject(obj) {
        if (null == obj || "object" != typeof obj) return obj;
        var copy = obj.constructor();
        for (var attr in obj) {
            if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];
        }
        return copy;
    }

    function checkCookie(){
        var result = "";
        var cookieName = 'userLogin=';
        var ca = document.cookie.split(';');
        ca.forEach(function(value){
            if(value.indexOf(cookieName) != -1) result = value;
        });
        if (result == "") return false;
        else {
            var value = result.substr(11,1);
            return (value == 1);
        }
    }
    
    if(window.location.href == '/' || window.location.href == '/login' || window.location.href == '/register'){
        if(checkCookie()) window.location.href = '/wallet';
    }

    window.addEventListener('polymer-ready', function(e) {
    });

    window.addEventListener('HTMLImportsLoaded', function(e) {
        // all imports loaded
    });

    window.addEventListener('WebComponentsReady', function(e) {
        // imports are loaded and elements have been registered
    });

    CoreStyle.g.paperInput.focusedColor = 'green';

    PolymerExpressions.prototype.formatDate = function (date, format) {
        return moment(date).format(format);
    };

    PolymerExpressions.prototype.iconUrlFilter = function (imgName) {
        if(!imgName) return '';
        var splited = imgName.split('/');
        if (splited[splited.length - 1].indexOf('.png') >= 0) return (urlRoot + '/img/icon/' + splited[splited.length - 1]);
        else return (urlRoot + '/img/icon/' + splited[splited.length - 1] + '.png');
    };

    PolymerExpressions.prototype.flagUrlFilter = function (shortName) {
        return (urlRoot + '/img/flag/ic_currency_' + shortName.toLowerCase() + '.png');
    };
    PolymerExpressions.prototype.amountDisplayClass =function(categoryType){
        return categoryType === 1 ? 'positive' : 'negative';
    };
</script>
<script>
    Bugsense.initAndStartSession( { apiKey: "02c094b6" } );
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39420218-1', 'auto');
    ga('send', 'pageview');

</script>

</body>

</html>
