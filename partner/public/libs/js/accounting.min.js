/*!
 * Accounting custom
 */
(function(e,t){function o(e){return!!(e===""||e&&e.charCodeAt&&e.substr)}function u(e){return i?i(e):s.call(e)==="[object Array]"}function a(e){return e&&s.call(e)==="[object Object]"}function f(e,t){var n;e=e||{};t=t||{};for(n in t){if(t.hasOwnProperty(n)){if(e[n]==null)e[n]=t[n]}}return e}function l(e,t,n){var i=[],s,o;if(!e)return i;if(r&&e.map===r)return e.map(t,n);for(s=0,o=e.length;s<o;s++){i[s]=t.call(n,e[s],s,e)}return i}function c(e,t){e=Math.round(Math.abs(e));return isNaN(e)?t:e}function h(e){var t=n.settings.currency.format;if(typeof e==="function")e=e();if(o(e)&&e.match("%v")){return{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}}else if(!e||!e.pos||!e.pos.match("%v")){return!o(t)?t:n.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}}return e}var n={};n.version="0.0.1";n.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."},abbreviations:{thousand:"K ",million:"M ",billion:"B ",trillion:"T "}};var r=Array.prototype.map,i=Array.isArray,s=Object.prototype.toString;var p=n.unformat=n.parse=function(e,t){if(u(e)){return l(e,function(e){return p(e,t)})}e=e||0;if(typeof e==="number")return e;t=t||n.settings.number.decimal;var r=1;if(e.indexOf(n.settings.abbreviations.trillion.trim())>0){r=Math.pow(10,12)}else if(e.indexOf(n.settings.abbreviations.trillion.trim())>0){r=Math.pow(10,9)}else if(e.indexOf(n.settings.abbreviations.million.trim())>0){r=Math.pow(10,6)}else if(e.indexOf(n.settings.abbreviations.thousand.trim())>0){r=Math.pow(10,3)}var i=new RegExp("[^0-9-"+t+"]",["g"]),s=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(i,"").replace(t,"."));return!isNaN(s)?s*r:0};var d=n.toFixed=function(e,t){t=c(t,n.settings.number.precision);var r=Math.pow(10,t);return(Math.round(n.unformat(e)*r)/r).toFixed(t)};var v=n.formatNumber=function(e,t,r,i){if(u(e)){return l(e,function(e){return v(e,t,r,i)})}e=p(e);var s=f(a(t)?t:{precision:t,thousand:r,decimal:i},n.settings.number),o=c(s.precision),h=e<0?"-":"",m=parseInt(d(Math.abs(e||0),o),10)+"",g=m.length>3?m.length%3:0;return h+(g?m.substr(0,g)+s.thousand:"")+m.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+s.thousand)+(o?s.decimal+d(Math.abs(e),o).split(".")[1]:"")};var m=n.shortenFormat=function(e,t,r,i){if(u(e)){return l(e,function(e){return m(e,t,r,i)})}e=p(e);var s=f(a(t)?t:{precision:1,thousand:r,decimal:i},n.settings.number),o,h=e,g=c(s.precision),y=e<0?"-":"",b=parseInt(d(Math.abs(e||0),g),10)+"",w=b.length>3?b.length%3:0;if(e>=Math.pow(10,12)){o=n.settings.abbreviations.trillion;h=h/Math.pow(10,12)}else if(e<Math.pow(10,12)&&e>=Math.pow(10,9)){o=n.settings.abbreviations.billion;h=h/Math.pow(10,9)}else if(e<Math.pow(10,9)&&e>=Math.pow(10,6)){o=n.settings.abbreviations.million;h=h/Math.pow(10,6)}else if(e<Math.pow(10,6)&&e>=Math.pow(10,3)){o=n.settings.abbreviations.thousand;h=h/Math.pow(10,3)}else{o="";h=h;s.precision=2}return v(h,c(s.precision),s.thousand,s.decimal)+o};var g=n.formatMoney=function(e,t,r,i,s,o){if(u(e)){return l(e,function(e){return g(e,t,r,i,s,o)})}e=p(e);var d=f(a(t)?t:{symbol:t,precision:r,thousand:i,decimal:s,format:o},n.settings.currency),y=h(d.format),b=e>0?y.pos:e<0?y.neg:y.zero;if(d.format.isShorten)return b.replace("%s",d.symbol).replace("%v",m(e,c(d.precision),d.thousand,d.decimal)).trim();else return b.replace("%s",d.symbol).replace("%v",v(e,c(d.precision),d.thousand,d.decimal)).trim()};n.formatColumn=function(e,t,r,i,s,d){if(!e)return[];var m=f(a(t)?t:{symbol:t,precision:r,thousand:i,decimal:s,format:d},n.settings.currency),g=h(m.format),y=g.pos.indexOf("%s")<g.pos.indexOf("%v")?true:false,b=0,w=l(e,function(e,t){if(u(e)){return n.formatColumn(e,m)}else{e=p(e);var r=e>0?g.pos:e<0?g.neg:g.zero,i=r.replace("%s",m.symbol).replace("%v",v(Math.abs(e),c(m.precision),m.thousand,m.decimal));if(i.length>b)b=i.length;return i}});return l(w,function(e,t){if(o(e)&&e.length<b){return y?e.replace(m.symbol,m.symbol+(new Array(b-e.length+1)).join(" ")):(new Array(b-e.length+1)).join(" ")+e}return e})};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=n}exports.accounting=n}else if(typeof define==="function"&&define.amd){define([],function(){return n})}else{n.noConflict=function(r){return function(){e.accounting=r;n.noConflict=t;return n}}(e.accounting);e["accounting"]=n}})(this)